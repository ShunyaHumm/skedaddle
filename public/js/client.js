"use strict";$(document).ready(function(){$(".location").click=this.value="",console.log("client log!");var n,e;$("#journeydets").submit(function(t){function o(){$(".saveJourney").on("click",function(n){console.log("clicked");var e={journeyInfo:$(n.target).siblings("p")[0].innerHTML,journeyDetails:[]};$($(n.target).siblings("ul")[0]).children().each(function(n,t){var o=t.innerHTML;e.journeyDetails.push(o)}),console.log(e),$.post(window.location.origin+"/journeyplan",e).then(function(n){console.log(n)})})}var r=function(n){return n.replace(" Underground Station","")};n=$("#origin").val(),e=$("#destination").val(),t.preventDefault(),console.log(n,e),$.get("https://api.tfl.gov.uk/Journey/JourneyResults/"+n+"/to/"+e+"?mode=tube&alternativeWalking=false&alternativeCycle=false&useMultiModal=false&app_id=fedc9052&app_key=7944db1b32e1272d7c66fb54d54314f4").then(function(n){if(n&&n.journeys){var e=n.journeys[0],t=e.legs[0].departurePoint.commonName,i=e.legs[e.legs.length-1].arrivalPoint.commonName;t=r(t),i=r(i),$("#journeyresults").html("<h3>"+t+" - "+i+"</h3>"),$("#journeyresults").append("<p>Found "+n.journeys.length+" options...</p>");var a=!0,l=!1,u=void 0;try{for(var s,c=n.journeys[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value,v="",g=!0,y=!1,f=void 0;try{for(var p,m=d.legs[Symbol.iterator]();!(g=(p=m.next()).done);g=!0){var h=p.value;v+="<li>Take the "+h.routeOptions[0].name+" line from "+r(h.departurePoint.commonName)+" to "+r(h.arrivalPoint.commonName)+", ("+h.duration+" minutes, "+h.path.stopPoints.length+" stops) -- "+h.instruction.detailed+"</li>"}}catch(n){y=!0,f=n}finally{try{!g&&m.return&&m.return()}finally{if(y)throw f}}var b="\n          <div>\n          <hr>\n          <p>"+d.legs.length+" legs, "+d.duration+" minutes, departing "+d.startDateTime+", arriving "+d.arrivalDateTime+":</p>\n          <ul>\n          "+v+'\n          </ul>\n          <button class="saveJourney btn btn-info">Save</button>\n          </div>\n          ';$("#journeyresults").append(b)}}catch(n){l=!0,u=n}finally{try{!a&&c.return&&c.return()}finally{if(l)throw u}}}console.log(n),setTimeout(o,1e3)})})});