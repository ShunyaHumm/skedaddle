"use strict";$(document).ready(function(){$(".location").click=this.value="",console.log("client log!");var e,n;$("#journeydets").submit(function(t){function o(){$(".saveJourney").on("click",function(e){console.log("clicked");var n={journeyInfo:$(e.target).siblings("p")[0].innerHTML,journeyDetails:[]};$($(e.target).siblings("ul")[0]).children().each(function(e,t){var o=t.innerHTML;n.journeyDetails.push(o)}),console.log(n),$.post(window.location.origin+"/journeyplan",n).then(function(e){console.log(e)})})}var r=function(e){return e.replace(" Underground Station","")};e=$("#origin").val(),n=$("#destination").val(),t.preventDefault(),console.log(e,n),$.get("https://api.tfl.gov.uk/Journey/JourneyResults/"+e+"/to/"+n+"?mode=tube&alternativeWalking=false&alternativeCycle=false&useMultiModal=false&app_id=fedc9052&app_key=7944db1b32e1272d7c66fb54d54314f4").then(function(e){if(e&&e.journeys){var n=e.journeys[0],t=n.legs[0].departurePoint.commonName,i=n.legs[n.legs.length-1].arrivalPoint.commonName;t=r(t),i=r(i),$("#journeyresults").html("<h3>"+t+" - "+i+"</h3>"),$("#journeyresults").append("<p>Found "+e.journeys.length+" options...</p>");var a=!0,l=!1,u=void 0;try{for(var s,c=e.journeys[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value,v="",g=!0,y=!1,p=void 0;try{for(var f,m=d.legs[Symbol.iterator]();!(g=(f=m.next()).done);g=!0){var h=f.value;v+="<li>Take the "+h.routeOptions[0].name+" line from "+r(h.departurePoint.commonName)+" to "+r(h.arrivalPoint.commonName)+", ("+h.duration+" minutes, "+h.path.stopPoints.length+" stops) -- "+h.instruction.detailed+"</li>"}}catch(e){y=!0,p=e}finally{try{!g&&m.return&&m.return()}finally{if(y)throw p}}var j="\n            <div>\n              <hr>\n              <p>"+d.legs.length+" legs, "+d.duration+" minutes, departing "+d.startDateTime+", arriving "+d.arrivalDateTime+":</p>\n              <ul>\n                "+v+'\n              </ul>\n              <button class="saveJourney">Save</button>\n            </div>\n            ';$("#journeyresults").append(j)}}catch(e){l=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(l)throw u}}}console.log(e),setTimeout(o,2e3)})})});